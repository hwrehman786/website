{% extends "layout.html" %}
{% block content %}
<div class="account-header">
    <h2>My Uploaded Posts</h2>
    <p>You have published {{ posts|length }} posts.</p>
</div>

<div style="display:flex;align-items:center;gap:16px;margin-bottom:18px">
    <img src="{{ avatar_url(current_user,128) }}" alt="avatar" style="width:96px;height:96px;border-radius:12px;object-fit:cover;border:2px solid rgba(255,255,255,0.06)">
    <form method="post" enctype="multipart/form-data" style="display:flex;flex-direction:column;gap:8px">
        <label style="font-size:13px;color:var(--muted)">Change profile avatar</label>
        <input type="file" name="avatar" accept="image/*">
        <button type="submit" class="btn-primary" style="width:auto;padding:8px 12px">Upload Avatar</button>
    </form>
</div>

<div class="post-grid">
    {% for post in posts %}
    <div class="post-card">
        {% if post.image_data %}
            <img src="data:image/jpeg;base64,{{ post.image_data }}" class="post-img">
        {% endif %}
        <h3>{{ post.title }}</h3>
        <p>{{ post.content[:100] }}...</p>
        <div class="post-actions">
            <button class="btn-edit">Edit</button>
            <button class="btn-delete">Delete</button>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}